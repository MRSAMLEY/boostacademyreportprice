<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Boost Academy Customer Report</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
    body { font-family: 'Inter', sans-serif; }

    .rgb-border-wrap {
        position: relative;
        z-index: 10;
        padding: 1px;
        background: #111827;
        border-radius: 1.5rem;
        overflow: hidden;
        box-shadow: 0 10px 15px -3px rgba(0,0,0,0.5),0 4px 6px -2 rgba(0,0,0,0.05);
    }
    .rgb-border-wrap::before {
        content: '';
        position: absolute;
        top: -50%; left: -50%;
        width: 200%; height: 200%;
        background: conic-gradient(#ff0000,#ffff00,#00ff00,#00ffff,#0000ff,#ff00ff,#ff0000);
        z-index: -1;
        animation: rotate 4s linear infinite;
    }
    @keyframes rotate { 0%{transform:rotate(0deg);}100%{transform:rotate(360deg);} }

    .rgb-inner-content {
        background-color: #111827;
        border-radius: 1.5rem;
        padding: 2.5rem 1.5rem;
    }

    input:focus, select:focus {
        border-color: #06b6d4 !important;
        box-shadow: 0 0 0 2px #06b6d4 !important;
    }
    input, select {
        background-color: #1f2937 !important;
        border-color: #374151 !important;
        color: #f3f4f6 !important;
    }

    .file-drop-area {
        border: 2px dashed #06b6d4;
        border-radius: 1rem;
        padding: 2rem;
        text-align: center;
        cursor: pointer;
        transition: background-color 0.2s;
    }
    .file-drop-area.dragover {
        background-color: rgba(6,182,212,0.1);
    }
</style>
</head>
<body class="bg-gray-900 antialiased text-gray-100 min-h-screen flex items-center justify-center p-4 sm:p-6">

<div class="rgb-border-wrap w-full max-w-xl transition-all duration-300 rounded-3xl">
    <div class="rgb-inner-content w-full">

        <header class="text-center mb-10">
            <h1 class="text-3xl sm:text-4xl font-extrabold text-cyan-400 mb-2 tracking-wider">Boost Academy Report</h1>
            <p class="text-gray-400 font-mono text-sm">Secure Data Submission // Protocol Online</p>
        </header>

        <form id="report-form" onsubmit="event.preventDefault(); sendReport();" class="space-y-6">

            <div class="space-y-4">
                <input type="text" id="name" placeholder="Customer Name" required
                    class="w-full p-3 border rounded-lg" />
                <input type="tel" id="number" placeholder="Customer Phone Number" required
                    class="w-full p-3 border rounded-lg" />
                <input type="text" id="address" placeholder="Delivery Address" required
                    class="w-full p-3 border rounded-lg" />
                <input type="text" id="delivery" placeholder="Delivery Express Service" required
                    class="w-full p-3 border rounded-lg" />

                <div class="relative">
                    <span class="absolute inset-y-0 left-0 flex items-center pl-3 text-cyan-500 font-bold">$</span>
                    <input type="number" id="price" placeholder="Price" step="0.01" required
                        class="w-full p-3 pl-8 border rounded-lg" />
                </div>
            </div>

            <!-- ORIGIN PAGE -->
            <label for="page-name" class="block text-cyan-400 font-semibold mb-2 mt-6">Origin Data Stream</label>
            <select id="page-name" required
                class="w-full p-3 border rounded-lg mb-6">
                <option value="" disabled selected>Select Source Page</option>
                <option value="Bong Pheng Store">Bong Pheng Store</option>
                <option value="Mey Smile">Mey Smile</option>
                <option value="Page 3">Page 3</option>
                <option value="Page 4">Page 4</option>
            </select>

            <!-- NEW ID SELECT ADDED -->
            <label for="select-id" class="block text-cyan-400 font-semibold mb-2">Select ID</label>
            <select id="select-id"
                class="w-full p-3 border rounded-lg mb-6">
                <option value="" disabled selected>Select ID (001 - 100)</option>
            </select>

            <!-- BANK SELECT -->
            <h2 class="text-lg font-semibold text-cyan-400 mb-3">Authorize Payment Channel</h2>
            <div id="bank-buttons" class="grid grid-cols-2 lg:grid-cols-4 gap-3 mb-6"></div>

            <!-- FILE UPLOAD -->
            <label class="block text-cyan-400 font-semibold mb-2 mt-6">Upload Invoice</label>
            <div id="file-drop-area" class="file-drop-area mb-4">
                Drag & Drop Invoice Here or Click to Upload
                <input type="file" id="invoice-file" class="hidden" accept="image/*" />
            </div>
            <p id="file-name" class="text-gray-400 text-sm"></p>

            <button type="submit" id="submit-button"
                     class="w-full mt-8 bg-gradient-to-r from-cyan-600 to-teal-700 text-white font-bold text-xl py-4 rounded-xl">
                <span>Submit Report // Engage Protocol</span>
            </button>
        </form>
    </div>
</div>

<!-- MODAL -->
<div id="message-modal" class="fixed inset-0 bg-gray-900 bg-opacity-90 hidden items-center justify-center p-4 z-50 opacity-0" aria-modal="true" role="dialog">
    <div class="bg-gray-800 rounded-xl shadow-2xl max-w-sm w-full p-6 text-center scale-95">
        <div id="modal-icon" class="text-5xl mb-4"></div>
        <h3 id="modal-title" class="text-xl font-bold mb-2 text-cyan-400"></h3>
        <p id="modal-message" class="text-gray-300 mb-6 whitespace-pre-wrap"></p>
        <button onclick="hideModal()"
                class="bg-cyan-600 text-white font-semibold py-2 px-4 rounded-lg w-full">
            Acknowledge // Close
        </button>
    </div>
</div>

<script>
const BOT_TOKEN = "8343485371:AAHUzwUW9flKScXHnLvpQO_wPjopAo9nOWc";
const CHAT_ID = "-1003388800232";

let selectedBank = null;
let selectedFile = null;

/* ---------------------------------------------------
   AUTO-GENERATE SELECT ID 001‚Äì100
--------------------------------------------------- */
document.addEventListener("DOMContentLoaded", () => {
    const idSelect = document.getElementById("select-id");
    for (let i = 1; i <= 100; i++) {
        const id = String(i).padStart(3, '0');
        const option = document.createElement("option");
        option.value = id;
        option.textContent = `ID ${id}`;
        idSelect.appendChild(option);
    }
});

/* ---------------------------------------------------
   MODAL FUNCTIONS
--------------------------------------------------- */
function showModal(title, message, type='info') {
    const modal = document.getElementById('message-modal');
    document.getElementById('modal-title').textContent = title;
    document.getElementById('modal-message').textContent = message;
    document.getElementById('modal-icon').innerHTML =
        type === 'success' ? '<span class="text-green-400">‚úÖ</span>' :
        type === 'error' ? '<span class="text-red-500">‚ùå</span>' :
        '<span class="text-cyan-400">üåê</span>';

    modal.classList.remove('hidden','opacity-0');
    modal.classList.add('flex','opacity-100');
}
function hideModal() {
    const modal = document.getElementById('message-modal');
    modal.classList.add('opacity-0');
    setTimeout(()=>modal.classList.add('hidden'),300);
}

/* ---------------------------------------------------
   BANK BUTTONS
--------------------------------------------------- */
function setBank(bank) {
    selectedBank = bank;
    renderBankButtons();
}
function renderBankButtons() {
    const banks = ['ABA Bank','ACLEDA Bank','WING Bank','TRUE Money'];
    const container = document.getElementById('bank-buttons');
    container.innerHTML = '';
    banks.forEach(bank => {
        const button = document.createElement('button');
        button.type='button';
        button.textContent = bank;
        button.className =
            selectedBank===bank ?
            "bg-cyan-600 text-white p-3 rounded-xl shadow-md" :
            "bg-gray-700 text-gray-300 p-3 rounded-xl hover:bg-cyan-900 hover:text-cyan-400";
        button.onclick = ()=>setBank(bank);
        container.appendChild(button);
    });
}
document.addEventListener('DOMContentLoaded', renderBankButtons);

/* ---------------------------------------------------
   FILE UPLOAD
--------------------------------------------------- */
const dropArea = document.getElementById('file-drop-area');
const fileInput = document.getElementById('invoice-file');
const fileNameText = document.getElementById('file-name');

dropArea.addEventListener('click', () => fileInput.click());
fileInput.addEventListener('change', () => {
    if(fileInput.files.length) {
        selectedFile = fileInput.files[0];
        fileNameText.textContent = selectedFile.name;
    }
});

/* ---------------------------------------------------
   SEND REPORT
--------------------------------------------------- */
function getInputValue(id) {
    const el = document.getElementById(id);
    return el ? el.value.trim() : '';
}

async function sendReport() {
    const name = getInputValue('name');
    const number = getInputValue('number');
    const address = getInputValue('address');
    const delivery = getInputValue('delivery');
    const price = getInputValue('price');
    const pageName = getInputValue('page-name');
    const selectedID = getInputValue('select-id');

    if (!pageName) return showModal('Error', 'Select an Origin Data Stream','error');
    if (!selectedID) return showModal('Error', 'Select an ID number','error');
    if (!selectedBank) return showModal('Error','Select a payment channel','error');
    if (!name || !number || !address || !delivery || !price)
        return showModal('Error','All fields required','error');
    if (!selectedFile) return showModal('Error','Upload an invoice','error');

    const caption = `
*--- Boost Academy Report Send ---*

üìÑ *Page:* ${pageName}
üÜî *ID:* ${selectedID}

üë§ *Customer:* ${name}
üìû *Phone:* ${number}
üè† *Address:* ${address}
üöö *Delivery:* ${delivery}

üí∞ *Price:* $${price}
üè¶ *Pay via:* ${selectedBank}

‚è±Ô∏è *Time:* ${new Date().toLocaleString()}
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ`;

    const submitBtn = document.getElementById('submit-button');
    submitBtn.disabled = true;
    submitBtn.innerHTML = "Sending...";

    try {
        const formData = new FormData();
        formData.append('chat_id', CHAT_ID);
        formData.append('photo', selectedFile);
        formData.append('caption', caption);
        formData.append('parse_mode', 'Markdown');

        const res = await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto`, {
            method: 'POST',
            body: formData
        });

        const result = await res.json();

        if (!result.ok) {
            showModal('Error', 'Telegram API Error:\n'+result.description, 'error');
            return;
        }

        showModal('Success', 'Invoice sent successfully!', 'success');
        document.getElementById('report-form').reset();
        selectedBank = null;
        selectedFile = null;
        fileNameText.textContent = '';
        renderBankButtons();

    } catch (e) {
        showModal('Error', 'Network Error:\n'+e.message, 'error');
    }

    submitBtn.disabled = false;
    submitBtn.innerHTML = "Submit Report // Engage Protocol";
}
</script>

</body>
</html>

